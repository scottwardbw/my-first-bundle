{"remainingRequest":"/Users/scott.ward/.npm/_npx/14895/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/scott.ward/Documents/GitHub/my-first-bundle/src/lib/create-source.js","dependencies":[{"path":"/Users/scott.ward/Documents/GitHub/my-first-bundle/src/lib/create-source.js","mtime":1630061621620},{"path":"/Users/scott.ward/.npm/_npx/14895/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/scott.ward/.npm/_npx/14895/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpOwovKioKICogeW91IGNhbiBwYXNzIGFuIG9wdGlvbnMgb2JqZWN0IGludG8geW91ciBzb3VyY2Ugd2hlbiBpbnN0YW50aWF0aW5nIHRoZSBmYWN0b3J5CiAqIHRoZXNlIGNhbiB0aGVuIGJlIHVzZWQgaW4geW91ciBjb2RlIGJ5IGFjY2VzcyBgb3B0aW9ucy5wcm9wTmFtZWAKICovCgoKbW9kdWxlLmV4cG9ydHMgPSAob3B0aW9ucyA9IHt9KSA9PiB7CiAgcmV0dXJuIHsKICAgIHNvdXJjZShwaXBlbGluZSkgewogICAgICAvL3NvdXJjZSBmYWN0b3JpZXMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggYSBmdW5jdGlvbiBjYWxsZWQgJ3NvdXJjZScKICAgICAgY29uc3QgcHJvcHMgPSBwaXBlbGluZS5jb25maWcuc2NlbmUub3B0aW9ucywKICAgICAgICAgICAgLy9nZXQgY29udHJvbCBwcm9wZXJ0aWVzCiAgICAgIHsKICAgICAgICBjaGFsbGVuZ2VSYXRpbmcsCiAgICAgICAgbGVnZW5kYXJ5LAogICAgICAgIHNpemUsCiAgICAgICAgbW9uc3RlclR5cGUKICAgICAgfSA9IHByb3BzOyAvLyBnZXQgdGhlIHZhbHVlcyB5b3UgbmVlZCBmcm9tIGNvbnRyb2wgcHJvcHMKCiAgICAgIGxldCB1cmwgPSBgaHR0cHM6Ly93d3cuZG5kNWVhcGkuY28vYXBpL21vbnN0ZXJzYDsKCiAgICAgIGlmICgoY2hhbGxlbmdlUmF0aW5nID09PSBudWxsIHx8IGNoYWxsZW5nZVJhdGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2hhbGxlbmdlUmF0aW5nLmxlbmd0aCkgPiAwKSB7CiAgICAgICAgdXJsID0gYCR7dXJsfT9jaGFsbGVuZ2VfcmF0aW5nPSR7Y2hhbGxlbmdlUmF0aW5nfWA7CiAgICAgIH0gLy9wdWxsIHlvdXIgc291cmNlIGRhdGEgZnJvbSBhIFVSTAoKCiAgICAgIGF4aW9zKHVybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5kYXRhKSAvL2dldCB0aGUganNvbiBkYXRhIGZyb20gdGhlIGFwaSBlbmRwb2ludAogICAgICAudGhlbihqc29uRGF0YSA9PiB7CiAgICAgICAgaWYgKGpzb25EYXRhLkluZm9ybWF0aW9uKSB7CiAgICAgICAgICByZXR1cm4gcGlwZWxpbmUuZXJyb3IoanNvbkRhdGEuSW5mb3JtYXRpb24pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGxlZ2VuZGFyeSA9PT0gYHllc2ApIHsKICAgICAgICAgIGpzb25EYXRhLnJlc3VsdHMgPSBqc29uRGF0YS5yZXN1bHRzLmZpbHRlcihyID0+IHsKICAgICAgICAgICAgdmFyIF9yJGxlZ2VuZGFyeV9hY3Rpb25zOwoKICAgICAgICAgICAgcmV0dXJuICgoX3IkbGVnZW5kYXJ5X2FjdGlvbnMgPSByLmxlZ2VuZGFyeV9hY3Rpb25zKSA9PT0gbnVsbCB8fCBfciRsZWdlbmRhcnlfYWN0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3IkbGVnZW5kYXJ5X2FjdGlvbnMubGVuZ3RoKSA+IDA7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGxlZ2VuZGFyeSA9PT0gYG5vYCkgewogICAgICAgICAganNvbkRhdGEucmVzdWx0cyA9IGpzb25EYXRhLnJlc3VsdHMuZmlsdGVyKHIgPT4gewogICAgICAgICAgICB2YXIgX3IkbGVnZW5kYXJ5X2FjdGlvbnMyOwoKICAgICAgICAgICAgcmV0dXJuICgoX3IkbGVnZW5kYXJ5X2FjdGlvbnMyID0gci5sZWdlbmRhcnlfYWN0aW9ucykgPT09IG51bGwgfHwgX3IkbGVnZW5kYXJ5X2FjdGlvbnMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfciRsZWdlbmRhcnlfYWN0aW9uczIubGVuZ3RoKSA9PT0gMDsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAganNvbkRhdGEuY291bnQgPSBqc29uRGF0YS5yZXN1bHRzLmxlbmd0aDsKICAgICAgICBwaXBlbGluZS5wdXNoKGpzb25EYXRhKTsgLy9zZW5kIHRoZSBkYXRhIGRvd24gdGhlIHBpcGVsaW5lCgogICAgICAgIHBpcGVsaW5lLmRvbmUoKTsgLy90ZWxsIHRoZSBwaXBlbGluZSB0aGF0IHlvdSBoYXZlIG5vIGZ1cnRoZXIgZGF0YSB0byBzZW5kCiAgICAgIH0pOwogICAgfQoKICB9Owp9Ow=="},{"version":3,"sources":["/Users/scott.ward/Documents/GitHub/my-first-bundle/src/lib/create-source.js"],"names":["axios","require","module","exports","options","source","pipeline","props","config","scene","challengeRating","legendary","size","monsterType","url","length","then","response","data","jsonData","Information","error","results","filter","r","legendary_actions","count","push","done"],"mappings":"AAAA;;AACA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;AACA;AACA;AACA;AACA;;;AACAC,MAAM,CAACC,OAAP,GAAiB,CAACC,OAAO,GAAG,EAAX,KAAkB;AAC/B,SAAO;AACHC,IAAAA,MAAM,CAACC,QAAD,EAAW;AAAE;AACf,YAAMC,KAAK,GAAGD,QAAQ,CAACE,MAAT,CAAgBC,KAAhB,CAAsBL,OAApC;AAAA,YAA6C;AACzC;AAAEM,QAAAA,eAAF;AAAmBC,QAAAA,SAAnB;AAA8BC,QAAAA,IAA9B;AAAoCC,QAAAA;AAApC,UAAoDN,KADxD,CADa,CAEkD;;AAE/D,UAAIO,GAAG,GAAI,sCAAX;;AAEA,UAAI,CAAAJ,eAAe,SAAf,IAAAA,eAAe,WAAf,YAAAA,eAAe,CAAEK,MAAjB,IAA0B,CAA9B,EAAiC;AAC7BD,QAAAA,GAAG,GAAI,GAAEA,GAAI,qBAAoBJ,eAAgB,EAAjD;AACH,OARY,CAUb;;;AACAV,MAAAA,KAAK,CAACc,GAAD,CAAL,CACKE,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAD/B,EACqC;AADrC,OAEKF,IAFL,CAEUG,QAAQ,IAAI;AACd,YAAIA,QAAQ,CAACC,WAAb,EAA0B;AACtB,iBAAOd,QAAQ,CAACe,KAAT,CAAeF,QAAQ,CAACC,WAAxB,CAAP;AACH;;AAED,YAAIT,SAAS,KAAM,KAAnB,EAAyB;AACrBQ,UAAAA,QAAQ,CAACG,OAAT,GAAmBH,QAAQ,CAACG,OAAT,CAAiBC,MAAjB,CAAwBC,CAAC;AAAA;;AAAA,mBAAI,yBAAAA,CAAC,CAACC,iBAAF,8EAAqBV,MAArB,IAA8B,CAAlC;AAAA,WAAzB,CAAnB;AACH,SAFD,MAGK,IAAIJ,SAAS,KAAM,IAAnB,EAAwB;AACzBQ,UAAAA,QAAQ,CAACG,OAAT,GAAmBH,QAAQ,CAACG,OAAT,CAAiBC,MAAjB,CAAwBC,CAAC;AAAA;;AAAA,mBAAI,0BAAAA,CAAC,CAACC,iBAAF,gFAAqBV,MAArB,MAAgC,CAApC;AAAA,WAAzB,CAAnB;AACH;;AAEDI,QAAAA,QAAQ,CAACO,KAAT,GAAiBP,QAAQ,CAACG,OAAT,CAAiBP,MAAlC;AAEAT,QAAAA,QAAQ,CAACqB,IAAT,CAAcR,QAAd,EAdc,CAcW;;AACzBb,QAAAA,QAAQ,CAACsB,IAAT,GAfc,CAeG;AACpB,OAlBL;AAmBH;;AA/BE,GAAP;AAiCH,CAlCD","sourcesContent":["'use strict';\nconst axios = require('axios');\n/**\n * you can pass an options object into your source when instantiating the factory\n * these can then be used in your code by access `options.propName`\n */\nmodule.exports = (options = {}) => {\n    return {\n        source(pipeline) { //source factories must return an object with a function called 'source'\n            const props = pipeline.config.scene.options, //get control properties\n                { challengeRating, legendary, size, monsterType } = props; // get the values you need from control props\n\n            let url = `https://www.dnd5eapi.co/api/monsters`;\n\n            if (challengeRating?.length > 0) {\n                url = `${url}?challenge_rating=${challengeRating}`;\n            }\n\n            //pull your source data from a URL\n            axios(url)\n                .then(response => response.data) //get the json data from the api endpoint\n                .then(jsonData => {\n                    if (jsonData.Information) {\n                        return pipeline.error(jsonData.Information);\n                    }\n\n                    if (legendary === `yes`) {\n                        jsonData.results = jsonData.results.filter(r => r.legendary_actions?.length > 0);\n                    }\n                    else if (legendary === `no`) {\n                        jsonData.results = jsonData.results.filter(r => r.legendary_actions?.length === 0);\n                    }\n\n                    jsonData.count = jsonData.results.length;\n\n                    pipeline.push(jsonData); //send the data down the pipeline\n                    pipeline.done(); //tell the pipeline that you have no further data to send\n                });\n        }\n    };\n};\n"]}]}