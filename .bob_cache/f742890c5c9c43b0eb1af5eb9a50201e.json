{"remainingRequest":"/Users/scott.ward/.npm/_npx/6842/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/scott.ward/Documents/GitHub/my-first-bundle/node_modules/duplexify/index.js","dependencies":[{"path":"/Users/scott.ward/Documents/GitHub/my-first-bundle/node_modules/duplexify/index.js","mtime":1629972623165},{"path":"/Users/scott.ward/.npm/_npx/6842/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/scott.ward/.npm/_npx/6842/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbScpOwoKdmFyIGVvcyA9IHJlcXVpcmUoJ2VuZC1vZi1zdHJlYW0nKTsKCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Cgp2YXIgc2hpZnQgPSByZXF1aXJlKCdzdHJlYW0tc2hpZnQnKTsKCnZhciBTSUdOQUxfRkxVU0ggPSBCdWZmZXIuZnJvbSAmJiBCdWZmZXIuZnJvbSAhPT0gVWludDhBcnJheS5mcm9tID8gQnVmZmVyLmZyb20oWzBdKSA6IG5ldyBCdWZmZXIoWzBdKTsKCnZhciBvbnVuY29yayA9IGZ1bmN0aW9uIChzZWxmLCBmbikgewogIGlmIChzZWxmLl9jb3JrZWQpIHNlbGYub25jZSgndW5jb3JrJywgZm4pO2Vsc2UgZm4oKTsKfTsKCnZhciBhdXRvRGVzdHJveSA9IGZ1bmN0aW9uIChzZWxmLCBlcnIpIHsKICBpZiAoc2VsZi5fYXV0b0Rlc3Ryb3kpIHNlbGYuZGVzdHJveShlcnIpOwp9OwoKdmFyIGRlc3Ryb3llciA9IGZ1bmN0aW9uIChzZWxmLCBlbmQpIHsKICByZXR1cm4gZnVuY3Rpb24gKGVycikgewogICAgaWYgKGVycikgYXV0b0Rlc3Ryb3koc2VsZiwgZXJyLm1lc3NhZ2UgPT09ICdwcmVtYXR1cmUgY2xvc2UnID8gbnVsbCA6IGVycik7ZWxzZSBpZiAoZW5kICYmICFzZWxmLl9lbmRlZCkgc2VsZi5lbmQoKTsKICB9Owp9OwoKdmFyIGVuZCA9IGZ1bmN0aW9uICh3cywgZm4pIHsKICBpZiAoIXdzKSByZXR1cm4gZm4oKTsKICBpZiAod3MuX3dyaXRhYmxlU3RhdGUgJiYgd3MuX3dyaXRhYmxlU3RhdGUuZmluaXNoZWQpIHJldHVybiBmbigpOwogIGlmICh3cy5fd3JpdGFibGVTdGF0ZSkgcmV0dXJuIHdzLmVuZChmbik7CiAgd3MuZW5kKCk7CiAgZm4oKTsKfTsKCnZhciB0b1N0cmVhbXMyID0gZnVuY3Rpb24gKHJzKSB7CiAgcmV0dXJuIG5ldyBzdHJlYW0uUmVhZGFibGUoewogICAgb2JqZWN0TW9kZTogdHJ1ZSwKICAgIGhpZ2hXYXRlck1hcms6IDE2CiAgfSkud3JhcChycyk7Cn07Cgp2YXIgRHVwbGV4aWZ5ID0gZnVuY3Rpb24gKHdyaXRhYmxlLCByZWFkYWJsZSwgb3B0cykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXhpZnkpKSByZXR1cm4gbmV3IER1cGxleGlmeSh3cml0YWJsZSwgcmVhZGFibGUsIG9wdHMpOwogIHN0cmVhbS5EdXBsZXguY2FsbCh0aGlzLCBvcHRzKTsKICB0aGlzLl93cml0YWJsZSA9IG51bGw7CiAgdGhpcy5fcmVhZGFibGUgPSBudWxsOwogIHRoaXMuX3JlYWRhYmxlMiA9IG51bGw7CiAgdGhpcy5fYXV0b0Rlc3Ryb3kgPSAhb3B0cyB8fCBvcHRzLmF1dG9EZXN0cm95ICE9PSBmYWxzZTsKICB0aGlzLl9mb3J3YXJkRGVzdHJveSA9ICFvcHRzIHx8IG9wdHMuZGVzdHJveSAhPT0gZmFsc2U7CiAgdGhpcy5fZm9yd2FyZEVuZCA9ICFvcHRzIHx8IG9wdHMuZW5kICE9PSBmYWxzZTsKICB0aGlzLl9jb3JrZWQgPSAxOyAvLyBzdGFydCBjb3JrZWQKCiAgdGhpcy5fb25kcmFpbiA9IG51bGw7CiAgdGhpcy5fZHJhaW5lZCA9IGZhbHNlOwogIHRoaXMuX2ZvcndhcmRpbmcgPSBmYWxzZTsKICB0aGlzLl91bndyaXRlID0gbnVsbDsKICB0aGlzLl91bnJlYWQgPSBudWxsOwogIHRoaXMuX2VuZGVkID0gZmFsc2U7CiAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTsKICBpZiAod3JpdGFibGUpIHRoaXMuc2V0V3JpdGFibGUod3JpdGFibGUpOwogIGlmIChyZWFkYWJsZSkgdGhpcy5zZXRSZWFkYWJsZShyZWFkYWJsZSk7Cn07Cgppbmhlcml0cyhEdXBsZXhpZnksIHN0cmVhbS5EdXBsZXgpOwoKRHVwbGV4aWZ5Lm9iaiA9IGZ1bmN0aW9uICh3cml0YWJsZSwgcmVhZGFibGUsIG9wdHMpIHsKICBpZiAoIW9wdHMpIG9wdHMgPSB7fTsKICBvcHRzLm9iamVjdE1vZGUgPSB0cnVlOwogIG9wdHMuaGlnaFdhdGVyTWFyayA9IDE2OwogIHJldHVybiBuZXcgRHVwbGV4aWZ5KHdyaXRhYmxlLCByZWFkYWJsZSwgb3B0cyk7Cn07CgpEdXBsZXhpZnkucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKCsrdGhpcy5fY29ya2VkID09PSAxKSB0aGlzLmVtaXQoJ2NvcmsnKTsKfTsKCkR1cGxleGlmeS5wcm90b3R5cGUudW5jb3JrID0gZnVuY3Rpb24gKCkgewogIGlmICh0aGlzLl9jb3JrZWQgJiYgLS10aGlzLl9jb3JrZWQgPT09IDApIHRoaXMuZW1pdCgndW5jb3JrJyk7Cn07CgpEdXBsZXhpZnkucHJvdG90eXBlLnNldFdyaXRhYmxlID0gZnVuY3Rpb24gKHdyaXRhYmxlKSB7CiAgaWYgKHRoaXMuX3Vud3JpdGUpIHRoaXMuX3Vud3JpdGUoKTsKCiAgaWYgKHRoaXMuZGVzdHJveWVkKSB7CiAgICBpZiAod3JpdGFibGUgJiYgd3JpdGFibGUuZGVzdHJveSkgd3JpdGFibGUuZGVzdHJveSgpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKHdyaXRhYmxlID09PSBudWxsIHx8IHdyaXRhYmxlID09PSBmYWxzZSkgewogICAgdGhpcy5lbmQoKTsKICAgIHJldHVybjsKICB9CgogIHZhciBzZWxmID0gdGhpczsKICB2YXIgdW5lbmQgPSBlb3Mod3JpdGFibGUsIHsKICAgIHdyaXRhYmxlOiB0cnVlLAogICAgcmVhZGFibGU6IGZhbHNlCiAgfSwgZGVzdHJveWVyKHRoaXMsIHRoaXMuX2ZvcndhcmRFbmQpKTsKCiAgdmFyIG9uZHJhaW4gPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgb25kcmFpbiA9IHNlbGYuX29uZHJhaW47CiAgICBzZWxmLl9vbmRyYWluID0gbnVsbDsKICAgIGlmIChvbmRyYWluKSBvbmRyYWluKCk7CiAgfTsKCiAgdmFyIGNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgc2VsZi5fd3JpdGFibGUucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7CgogICAgdW5lbmQoKTsKICB9OwoKICBpZiAodGhpcy5fdW53cml0ZSkgcHJvY2Vzcy5uZXh0VGljayhvbmRyYWluKTsgLy8gZm9yY2UgYSBkcmFpbiBvbiBzdHJlYW0gcmVzZXQgdG8gYXZvaWQgbGl2ZWxvY2tzCgogIHRoaXMuX3dyaXRhYmxlID0gd3JpdGFibGU7CgogIHRoaXMuX3dyaXRhYmxlLm9uKCdkcmFpbicsIG9uZHJhaW4pOwoKICB0aGlzLl91bndyaXRlID0gY2xlYXI7CiAgdGhpcy51bmNvcmsoKTsgLy8gYWx3YXlzIHVuY29yayBzZXRXcml0YWJsZQp9OwoKRHVwbGV4aWZ5LnByb3RvdHlwZS5zZXRSZWFkYWJsZSA9IGZ1bmN0aW9uIChyZWFkYWJsZSkgewogIGlmICh0aGlzLl91bnJlYWQpIHRoaXMuX3VucmVhZCgpOwoKICBpZiAodGhpcy5kZXN0cm95ZWQpIHsKICAgIGlmIChyZWFkYWJsZSAmJiByZWFkYWJsZS5kZXN0cm95KSByZWFkYWJsZS5kZXN0cm95KCk7CiAgICByZXR1cm47CiAgfQoKICBpZiAocmVhZGFibGUgPT09IG51bGwgfHwgcmVhZGFibGUgPT09IGZhbHNlKSB7CiAgICB0aGlzLnB1c2gobnVsbCk7CiAgICB0aGlzLnJlc3VtZSgpOwogICAgcmV0dXJuOwogIH0KCiAgdmFyIHNlbGYgPSB0aGlzOwogIHZhciB1bmVuZCA9IGVvcyhyZWFkYWJsZSwgewogICAgd3JpdGFibGU6IGZhbHNlLAogICAgcmVhZGFibGU6IHRydWUKICB9LCBkZXN0cm95ZXIodGhpcykpOwoKICB2YXIgb25yZWFkYWJsZSA9IGZ1bmN0aW9uICgpIHsKICAgIHNlbGYuX2ZvcndhcmQoKTsKICB9OwoKICB2YXIgb25lbmQgPSBmdW5jdGlvbiAoKSB7CiAgICBzZWxmLnB1c2gobnVsbCk7CiAgfTsKCiAgdmFyIGNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgc2VsZi5fcmVhZGFibGUyLnJlbW92ZUxpc3RlbmVyKCdyZWFkYWJsZScsIG9ucmVhZGFibGUpOwoKICAgIHNlbGYuX3JlYWRhYmxlMi5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwoKICAgIHVuZW5kKCk7CiAgfTsKCiAgdGhpcy5fZHJhaW5lZCA9IHRydWU7CiAgdGhpcy5fcmVhZGFibGUgPSByZWFkYWJsZTsKICB0aGlzLl9yZWFkYWJsZTIgPSByZWFkYWJsZS5fcmVhZGFibGVTdGF0ZSA/IHJlYWRhYmxlIDogdG9TdHJlYW1zMihyZWFkYWJsZSk7CgogIHRoaXMuX3JlYWRhYmxlMi5vbigncmVhZGFibGUnLCBvbnJlYWRhYmxlKTsKCiAgdGhpcy5fcmVhZGFibGUyLm9uKCdlbmQnLCBvbmVuZCk7CgogIHRoaXMuX3VucmVhZCA9IGNsZWFyOwoKICB0aGlzLl9mb3J3YXJkKCk7Cn07CgpEdXBsZXhpZnkucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2RyYWluZWQgPSB0cnVlOwoKICB0aGlzLl9mb3J3YXJkKCk7Cn07CgpEdXBsZXhpZnkucHJvdG90eXBlLl9mb3J3YXJkID0gZnVuY3Rpb24gKCkgewogIGlmICh0aGlzLl9mb3J3YXJkaW5nIHx8ICF0aGlzLl9yZWFkYWJsZTIgfHwgIXRoaXMuX2RyYWluZWQpIHJldHVybjsKICB0aGlzLl9mb3J3YXJkaW5nID0gdHJ1ZTsKICB2YXIgZGF0YTsKCiAgd2hpbGUgKHRoaXMuX2RyYWluZWQgJiYgKGRhdGEgPSBzaGlmdCh0aGlzLl9yZWFkYWJsZTIpKSAhPT0gbnVsbCkgewogICAgaWYgKHRoaXMuZGVzdHJveWVkKSBjb250aW51ZTsKICAgIHRoaXMuX2RyYWluZWQgPSB0aGlzLnB1c2goZGF0YSk7CiAgfQoKICB0aGlzLl9mb3J3YXJkaW5nID0gZmFsc2U7Cn07CgpEdXBsZXhpZnkucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyKSB7CiAgaWYgKHRoaXMuZGVzdHJveWVkKSByZXR1cm47CiAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlOwogIHZhciBzZWxmID0gdGhpczsKICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgIHNlbGYuX2Rlc3Ryb3koZXJyKTsKICB9KTsKfTsKCkR1cGxleGlmeS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyKSB7CiAgaWYgKGVycikgewogICAgdmFyIG9uZHJhaW4gPSB0aGlzLl9vbmRyYWluOwogICAgdGhpcy5fb25kcmFpbiA9IG51bGw7CiAgICBpZiAob25kcmFpbikgb25kcmFpbihlcnIpO2Vsc2UgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7CiAgfQoKICBpZiAodGhpcy5fZm9yd2FyZERlc3Ryb3kpIHsKICAgIGlmICh0aGlzLl9yZWFkYWJsZSAmJiB0aGlzLl9yZWFkYWJsZS5kZXN0cm95KSB0aGlzLl9yZWFkYWJsZS5kZXN0cm95KCk7CiAgICBpZiAodGhpcy5fd3JpdGFibGUgJiYgdGhpcy5fd3JpdGFibGUuZGVzdHJveSkgdGhpcy5fd3JpdGFibGUuZGVzdHJveSgpOwogIH0KCiAgdGhpcy5lbWl0KCdjbG9zZScpOwp9OwoKRHVwbGV4aWZ5LnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoZGF0YSwgZW5jLCBjYikgewogIGlmICh0aGlzLmRlc3Ryb3llZCkgcmV0dXJuIGNiKCk7CiAgaWYgKHRoaXMuX2NvcmtlZCkgcmV0dXJuIG9udW5jb3JrKHRoaXMsIHRoaXMuX3dyaXRlLmJpbmQodGhpcywgZGF0YSwgZW5jLCBjYikpOwogIGlmIChkYXRhID09PSBTSUdOQUxfRkxVU0gpIHJldHVybiB0aGlzLl9maW5pc2goY2IpOwogIGlmICghdGhpcy5fd3JpdGFibGUpIHJldHVybiBjYigpOwogIGlmICh0aGlzLl93cml0YWJsZS53cml0ZShkYXRhKSA9PT0gZmFsc2UpIHRoaXMuX29uZHJhaW4gPSBjYjtlbHNlIGNiKCk7Cn07CgpEdXBsZXhpZnkucHJvdG90eXBlLl9maW5pc2ggPSBmdW5jdGlvbiAoY2IpIHsKICB2YXIgc2VsZiA9IHRoaXM7CiAgdGhpcy5lbWl0KCdwcmVlbmQnKTsKICBvbnVuY29yayh0aGlzLCBmdW5jdGlvbiAoKSB7CiAgICBlbmQoc2VsZi5fZm9yd2FyZEVuZCAmJiBzZWxmLl93cml0YWJsZSwgZnVuY3Rpb24gKCkgewogICAgICAvLyBoYXh4IHRvIG5vdCBlbWl0IHByZWZpbmlzaCB0d2ljZQogICAgICBpZiAoc2VsZi5fd3JpdGFibGVTdGF0ZS5wcmVmaW5pc2hlZCA9PT0gZmFsc2UpIHNlbGYuX3dyaXRhYmxlU3RhdGUucHJlZmluaXNoZWQgPSB0cnVlOwogICAgICBzZWxmLmVtaXQoJ3ByZWZpbmlzaCcpOwogICAgICBvbnVuY29yayhzZWxmLCBjYik7CiAgICB9KTsKICB9KTsKfTsKCkR1cGxleGlmeS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGRhdGEsIGVuYywgY2IpIHsKICBpZiAodHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicpIHJldHVybiB0aGlzLmVuZChudWxsLCBudWxsLCBkYXRhKTsKICBpZiAodHlwZW9mIGVuYyA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHRoaXMuZW5kKGRhdGEsIG51bGwsIGVuYyk7CiAgdGhpcy5fZW5kZWQgPSB0cnVlOwogIGlmIChkYXRhKSB0aGlzLndyaXRlKGRhdGEpOwogIGlmICghdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRpbmcpIHRoaXMud3JpdGUoU0lHTkFMX0ZMVVNIKTsKICByZXR1cm4gc3RyZWFtLldyaXRhYmxlLnByb3RvdHlwZS5lbmQuY2FsbCh0aGlzLCBjYik7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IER1cGxleGlmeTs="},{"version":3,"sources":["/Users/scott.ward/Documents/GitHub/my-first-bundle/node_modules/duplexify/index.js"],"names":["stream","require","eos","inherits","shift","SIGNAL_FLUSH","Buffer","from","Uint8Array","onuncork","self","fn","_corked","once","autoDestroy","err","_autoDestroy","destroy","destroyer","end","message","_ended","ws","_writableState","finished","toStreams2","rs","Readable","objectMode","highWaterMark","wrap","Duplexify","writable","readable","opts","Duplex","call","_writable","_readable","_readable2","_forwardDestroy","_forwardEnd","_ondrain","_drained","_forwarding","_unwrite","_unread","destroyed","setWritable","setReadable","obj","prototype","cork","emit","uncork","unend","ondrain","clear","removeListener","process","nextTick","on","push","resume","onreadable","_forward","onend","_readableState","_read","data","_destroy","_write","enc","cb","bind","_finish","write","prefinished","ending","Writable","module","exports"],"mappings":"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","sourcesContent":["var stream = require('readable-stream')\nvar eos = require('end-of-stream')\nvar inherits = require('inherits')\nvar shift = require('stream-shift')\n\nvar SIGNAL_FLUSH = (Buffer.from && Buffer.from !== Uint8Array.from)\n  ? Buffer.from([0])\n  : new Buffer([0])\n\nvar onuncork = function(self, fn) {\n  if (self._corked) self.once('uncork', fn)\n  else fn()\n}\n\nvar autoDestroy = function (self, err) {\n  if (self._autoDestroy) self.destroy(err)\n}\n\nvar destroyer = function(self, end) {\n  return function(err) {\n    if (err) autoDestroy(self, err.message === 'premature close' ? null : err)\n    else if (end && !self._ended) self.end()\n  }\n}\n\nvar end = function(ws, fn) {\n  if (!ws) return fn()\n  if (ws._writableState && ws._writableState.finished) return fn()\n  if (ws._writableState) return ws.end(fn)\n  ws.end()\n  fn()\n}\n\nvar toStreams2 = function(rs) {\n  return new (stream.Readable)({objectMode:true, highWaterMark:16}).wrap(rs)\n}\n\nvar Duplexify = function(writable, readable, opts) {\n  if (!(this instanceof Duplexify)) return new Duplexify(writable, readable, opts)\n  stream.Duplex.call(this, opts)\n\n  this._writable = null\n  this._readable = null\n  this._readable2 = null\n\n  this._autoDestroy = !opts || opts.autoDestroy !== false\n  this._forwardDestroy = !opts || opts.destroy !== false\n  this._forwardEnd = !opts || opts.end !== false\n  this._corked = 1 // start corked\n  this._ondrain = null\n  this._drained = false\n  this._forwarding = false\n  this._unwrite = null\n  this._unread = null\n  this._ended = false\n\n  this.destroyed = false\n\n  if (writable) this.setWritable(writable)\n  if (readable) this.setReadable(readable)\n}\n\ninherits(Duplexify, stream.Duplex)\n\nDuplexify.obj = function(writable, readable, opts) {\n  if (!opts) opts = {}\n  opts.objectMode = true\n  opts.highWaterMark = 16\n  return new Duplexify(writable, readable, opts)\n}\n\nDuplexify.prototype.cork = function() {\n  if (++this._corked === 1) this.emit('cork')\n}\n\nDuplexify.prototype.uncork = function() {\n  if (this._corked && --this._corked === 0) this.emit('uncork')\n}\n\nDuplexify.prototype.setWritable = function(writable) {\n  if (this._unwrite) this._unwrite()\n\n  if (this.destroyed) {\n    if (writable && writable.destroy) writable.destroy()\n    return\n  }\n\n  if (writable === null || writable === false) {\n    this.end()\n    return\n  }\n\n  var self = this\n  var unend = eos(writable, {writable:true, readable:false}, destroyer(this, this._forwardEnd))\n\n  var ondrain = function() {\n    var ondrain = self._ondrain\n    self._ondrain = null\n    if (ondrain) ondrain()\n  }\n\n  var clear = function() {\n    self._writable.removeListener('drain', ondrain)\n    unend()\n  }\n\n  if (this._unwrite) process.nextTick(ondrain) // force a drain on stream reset to avoid livelocks\n\n  this._writable = writable\n  this._writable.on('drain', ondrain)\n  this._unwrite = clear\n\n  this.uncork() // always uncork setWritable\n}\n\nDuplexify.prototype.setReadable = function(readable) {\n  if (this._unread) this._unread()\n\n  if (this.destroyed) {\n    if (readable && readable.destroy) readable.destroy()\n    return\n  }\n\n  if (readable === null || readable === false) {\n    this.push(null)\n    this.resume()\n    return\n  }\n\n  var self = this\n  var unend = eos(readable, {writable:false, readable:true}, destroyer(this))\n\n  var onreadable = function() {\n    self._forward()\n  }\n\n  var onend = function() {\n    self.push(null)\n  }\n\n  var clear = function() {\n    self._readable2.removeListener('readable', onreadable)\n    self._readable2.removeListener('end', onend)\n    unend()\n  }\n\n  this._drained = true\n  this._readable = readable\n  this._readable2 = readable._readableState ? readable : toStreams2(readable)\n  this._readable2.on('readable', onreadable)\n  this._readable2.on('end', onend)\n  this._unread = clear\n\n  this._forward()\n}\n\nDuplexify.prototype._read = function() {\n  this._drained = true\n  this._forward()\n}\n\nDuplexify.prototype._forward = function() {\n  if (this._forwarding || !this._readable2 || !this._drained) return\n  this._forwarding = true\n\n  var data\n\n  while (this._drained && (data = shift(this._readable2)) !== null) {\n    if (this.destroyed) continue\n    this._drained = this.push(data)\n  }\n\n  this._forwarding = false\n}\n\nDuplexify.prototype.destroy = function(err) {\n  if (this.destroyed) return\n  this.destroyed = true\n\n  var self = this\n  process.nextTick(function() {\n    self._destroy(err)\n  })\n}\n\nDuplexify.prototype._destroy = function(err) {\n  if (err) {\n    var ondrain = this._ondrain\n    this._ondrain = null\n    if (ondrain) ondrain(err)\n    else this.emit('error', err)\n  }\n\n  if (this._forwardDestroy) {\n    if (this._readable && this._readable.destroy) this._readable.destroy()\n    if (this._writable && this._writable.destroy) this._writable.destroy()\n  }\n\n  this.emit('close')\n}\n\nDuplexify.prototype._write = function(data, enc, cb) {\n  if (this.destroyed) return cb()\n  if (this._corked) return onuncork(this, this._write.bind(this, data, enc, cb))\n  if (data === SIGNAL_FLUSH) return this._finish(cb)\n  if (!this._writable) return cb()\n\n  if (this._writable.write(data) === false) this._ondrain = cb\n  else cb()\n}\n\nDuplexify.prototype._finish = function(cb) {\n  var self = this\n  this.emit('preend')\n  onuncork(this, function() {\n    end(self._forwardEnd && self._writable, function() {\n      // haxx to not emit prefinish twice\n      if (self._writableState.prefinished === false) self._writableState.prefinished = true\n      self.emit('prefinish')\n      onuncork(self, cb)\n    })\n  })\n}\n\nDuplexify.prototype.end = function(data, enc, cb) {\n  if (typeof data === 'function') return this.end(null, null, data)\n  if (typeof enc === 'function') return this.end(data, null, enc)\n  this._ended = true\n  if (data) this.write(data)\n  if (!this._writableState.ending) this.write(SIGNAL_FLUSH)\n  return stream.Writable.prototype.end.call(this, cb)\n}\n\nmodule.exports = Duplexify\n"]}]}