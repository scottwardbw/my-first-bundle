{"remainingRequest":"/Users/scott.ward/.npm/_npx/13461/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/scott.ward/Documents/GitHub/my-first-bundle/src/lib/create-source.js","dependencies":[{"path":"/Users/scott.ward/Documents/GitHub/my-first-bundle/src/lib/create-source.js","mtime":1629972610387},{"path":"/Users/scott.ward/.npm/_npx/13461/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/scott.ward/.npm/_npx/13461/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpOwovKioKICogeW91IGNhbiBwYXNzIGFuIG9wdGlvbnMgb2JqZWN0IGludG8geW91ciBzb3VyY2Ugd2hlbiBpbnN0YW50aWF0aW5nIHRoZSBmYWN0b3J5CiAqIHRoZXNlIGNhbiB0aGVuIGJlIHVzZWQgaW4geW91ciBjb2RlIGJ5IGFjY2VzcyBgb3B0aW9ucy5wcm9wTmFtZWAKICovCgoKbW9kdWxlLmV4cG9ydHMgPSAob3B0aW9ucyA9IHt9KSA9PiB7CiAgcmV0dXJuIHsKICAgIHNvdXJjZShwaXBlbGluZSkgewogICAgICAvL3NvdXJjZSBmYWN0b3JpZXMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggYSBmdW5jdGlvbiBjYWxsZWQgJ3NvdXJjZScKICAgICAgY29uc3QgcHJvcHMgPSBwaXBlbGluZS5jb25maWcuc2NlbmUub3B0aW9uczsgLy9nZXQgY29udHJvbCBwcm9wZXJ0aWVzCgogICAgICBjb25zdCB7CiAgICAgICAgeVZhbHVlLAogICAgICAgIHN0b2NrLAogICAgICAgIGFwaWtleQogICAgICB9ID0gcHJvcHM7IC8vIGdldCB0aGUgdmFsdWVzIHlvdSBuZWVkIGZyb20gY29udHJvbCBwcm9wcwogICAgICAvL3B1bGwgeW91ciBzb3VyY2UgZGF0YSBmcm9tIGEgVVJMCgogICAgICBheGlvcyhgaHR0cHM6Ly93d3cuYWxwaGF2YW50YWdlLmNvL3F1ZXJ5P2Z1bmN0aW9uPVRJTUVfU0VSSUVTX0lOVFJBREFZJnN5bWJvbD0ke3N0b2NrfSZpbnRlcnZhbD01bWluJmFwaWtleT0ke2FwaWtleX1gKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmRhdGEpIC8vZ2V0IHRoZSBqc29uIGRhdGEgZnJvbSB0aGUgYXBpIGVuZHBvaW50CiAgICAgIC50aGVuKGpzb25EYXRhID0+IHsKICAgICAgICBpZiAoanNvbkRhdGEuSW5mb3JtYXRpb24pIHsKICAgICAgICAgIHJldHVybiBwaXBlbGluZS5lcnJvcihqc29uRGF0YS5JbmZvcm1hdGlvbik7CiAgICAgICAgfQoKICAgICAgICBjb25zdCB0YWJ1bGFyID0gT2JqZWN0LmVudHJpZXMoanNvbkRhdGFbJ1RpbWUgU2VyaWVzICg1bWluKSddKS5yZWR1Y2UoKGFjYywgW2RhdGUsIGl0ZW1dKSA9PiB7CiAgICAgICAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyhpdGVtKS5maW5kKGtleSA9PiBrZXkuaW5jbHVkZXMoeVZhbHVlKSk7IC8vZm9yIHRpbWUgZGF0YSB0aGUga2V5IHNob3VsZCBiZSBhbiBJU08gODYwMSBTdHJpbmcKCiAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihhY2MsIHsKICAgICAgICAgICAgW25ldyBEYXRlKGRhdGUpLnRvSVNPU3RyaW5nKCldOiBwYXJzZUZsb2F0KGl0ZW1ba2V5XSkKICAgICAgICAgIH0pOwogICAgICAgIH0sIHt9KTsgLy9zaW1wbGlmeSB0aGUgZGF0YSBzbyB0aGF0IGl0cyBlYXNpZXIgdG8gaGFuZGxlCgogICAgICAgIHBpcGVsaW5lLnB1c2godGFidWxhcik7IC8vc2VuZCB0aGUgZGF0YSBkb3duIHRoZSBwaXBlbGluZQoKICAgICAgICBwaXBlbGluZS5kb25lKCk7IC8vdGVsbCB0aGUgcGlwZWxpbmUgdGhhdCB5b3UgaGF2ZSBubyBmdXJ0aGVyIGRhdGEgdG8gc2VuZAogICAgICB9KTsKICAgIH0KCiAgfTsKfTs="},{"version":3,"sources":["/Users/scott.ward/Documents/GitHub/my-first-bundle/src/lib/create-source.js"],"names":["axios","require","module","exports","options","source","pipeline","props","config","scene","yValue","stock","apikey","then","response","data","jsonData","Information","error","tabular","Object","entries","reduce","acc","date","item","key","keys","find","includes","assign","Date","toISOString","parseFloat","push","done"],"mappings":"AAAA;;AACA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;AACA;AACA;AACA;AACA;;;AACAC,MAAM,CAACC,OAAP,GAAiB,CAACC,OAAO,GAAG,EAAX,KAAkB;AAC/B,SAAO;AACHC,IAAAA,MAAM,CAACC,QAAD,EAAW;AAAE;AACf,YAAMC,KAAK,GAAGD,QAAQ,CAACE,MAAT,CAAgBC,KAAhB,CAAsBL,OAApC,CADa,CACgC;;AAC7C,YAAM;AAACM,QAAAA,MAAD;AAASC,QAAAA,KAAT;AAAgBC,QAAAA;AAAhB,UAA0BL,KAAhC,CAFa,CAE0B;AACvC;;AACAP,MAAAA,KAAK,CAAE,0EAAyEW,KAAM,yBAAwBC,MAAO,EAAhH,CAAL,CACKC,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAD/B,EACqC;AADrC,OAEKF,IAFL,CAEUG,QAAQ,IAAI;AACd,YAAIA,QAAQ,CAACC,WAAb,EAA0B;AACtB,iBAAOX,QAAQ,CAACY,KAAT,CAAeF,QAAQ,CAACC,WAAxB,CAAP;AACH;;AAED,cAAME,OAAO,GAAGC,MAAM,CAACC,OAAP,CAAeL,QAAQ,CAAC,oBAAD,CAAvB,EAA+CM,MAA/C,CAAsD,CAACC,GAAD,EAAM,CAACC,IAAD,EAAOC,IAAP,CAAN,KAAuB;AACzF,gBAAMC,GAAG,GAAGN,MAAM,CAACO,IAAP,CAAYF,IAAZ,EAAkBG,IAAlB,CAAuBF,GAAG,IAAIA,GAAG,CAACG,QAAJ,CAAanB,MAAb,CAA9B,CAAZ,CADyF,CAGzF;;AACA,iBAAOU,MAAM,CAACU,MAAP,CAAcP,GAAd,EAAmB;AAAC,aAAC,IAAIQ,IAAJ,CAASP,IAAT,EAAeQ,WAAf,EAAD,GAAgCC,UAAU,CAACR,IAAI,CAACC,GAAD,CAAL;AAA3C,WAAnB,CAAP;AACH,SALe,EAKb,EALa,CAAhB,CALc,CAUN;;AAERpB,QAAAA,QAAQ,CAAC4B,IAAT,CAAcf,OAAd,EAZc,CAYU;;AACxBb,QAAAA,QAAQ,CAAC6B,IAAT,GAbc,CAaG;AACpB,OAhBL;AAiBH;;AAtBE,GAAP;AAwBH,CAzBD","sourcesContent":["'use strict';\nconst axios = require('axios');\n/**\n * you can pass an options object into your source when instantiating the factory\n * these can then be used in your code by access `options.propName`\n */\nmodule.exports = (options = {}) => {\n    return {\n        source(pipeline) { //source factories must return an object with a function called 'source'\n            const props = pipeline.config.scene.options; //get control properties\n            const {yValue, stock, apikey} = props; // get the values you need from control props\n            //pull your source data from a URL\n            axios(`https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${stock}&interval=5min&apikey=${apikey}`)\n                .then(response => response.data) //get the json data from the api endpoint\n                .then(jsonData => {\n                    if (jsonData.Information) {\n                        return pipeline.error(jsonData.Information);\n                    }\n\n                    const tabular = Object.entries(jsonData['Time Series (5min)']).reduce((acc, [date, item]) => {\n                        const key = Object.keys(item).find(key => key.includes(yValue));\n\n                        //for time data the key should be an ISO 8601 String\n                        return Object.assign(acc, {[new Date(date).toISOString()]: parseFloat(item[key])});\n                    }, {}); //simplify the data so that its easier to handle\n\n                    pipeline.push(tabular); //send the data down the pipeline\n                    pipeline.done(); //tell the pipeline that you have no further data to send\n                });\n        }\n    };\n};\n"]}]}